name: Slither Analysis
on: [push]
jobs:
  analyze:
    runs-on: ubuntu-latest
    steps:
        - name: Checkout Repository
          uses: actions/checkout@v4
          with:
            submodules: recursive

        - name: Install Foundry
          uses: foundry-rs/foundry-toolchain@v1
          with:
            version: nightly

        - name: Install dependencies
          run: forge install

        - name: Run Forge build
          run: |
            forge --version
            forge build --sizes
          id: build

        - name: Run Slither
          uses: crytic/slither-action@v0.4.0
          with:
            target: 'src/'